# .github/workflows/generate-llms-txt.yml
name: Generate LLMS TXT files

on:
  schedule:
    - cron: '0 12 * * *'  # Every day at 12:00 UTC
  workflow_dispatch:

jobs:
  generate-files:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Run npx commands to generate files
        run: |
          npx github:dotenvx/llmstxt gen https://aurorasolar.com/sitemap_index.xml --description '## Subindexes
          - llms-help.txt
          ## Main Properties
          - [Aurora Solar Marketing Website](https://aurorasolar.com): Main corporate site showcasing product features, solutions, and resources.
          - [Aurora Solar Help Center](https://help.aurorasolar.com): Support portal with tutorials, troubleshooting, and product documentation.
          - [Aurora Solar API Documentation](https://docs.aurorasolar.com): Technical documentation for integrating with Aurora’s API.
          ## Localized Marketing Sites
          - [EU Landing Page](https://aurorasolar.com/eu/): Central hub for Aurora’s European content and region-specific offerings.
          - [Aurora Solar France](https://aurorasolar.com/eu/fr/): French-language version of the site with tailored content for France.
          - [Aurora Solar Spain](https://aurorasolar.com/eu/es/): Spanish-language version of the site with tailored content for Spain.
          - [Aurora Solar Germany](https://aurorasolar.com/eu/de/): German-language version of the site with tailored content for Germany.' > llms.txt

          npx github:dotenvx/llmstxt gen https://aurorasolar.com/eu/de/sitemap_index.xml > llms-eu.txt
          npx github:dotenvx/llmstxt gen https://help.aurorasolar.com/hc/sitemap.xml > llms-help.txt
          npx github:dotenvx/llmstxt gen https://docs.aurorasolar.com/sitemap.xml > llms-docs.txt
          npx github:dotenvx/llmstxt gen https://helioscope.aurorasolar.com/sitemap_index.xml > llms-helioscope.txt

      - name: Upload TXT files as artifacts
        uses: actions/upload-artifact@v4
        with:
          name: llms-txt-files
          path: |
            llms.txt
            llms-eu.txt
            llms-help.txt
            llms-docs.txt
            llms-helioscope.txt
      - name: Upload files to WordPress server via SSH
        run: |
          mkdir -p ~/.ssh
          echo "${{ secrets.SSH_PRIVATE_KEY }}" > ~/.ssh/id_ed25519
          chmod 600 ~/.ssh/id_ed25519
          ssh-keyscan -H your.server.com >> ~/.ssh/known_hosts
      
          scp llms*.txt ssh aurorasolarmulti@34.94.122.55 -p 29986:/www/aurorasolarmulti_703/public/

